<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nh√¢n vi√™n ph·ª•c v·ª• ·∫£o</title>
<style>
body {
  font-family: system-ui, sans-serif;
  background: #fafaf8;
  margin: 0; padding: 0;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  height: 100vh;
}
.chat-box {
  width: 90%;
  max-width: 420px;
  height: 70vh;
  overflow-y: auto;
  background: white;
  border-radius: 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  padding: 15px;
}
.message { margin: 8px 0; line-height: 1.4; }
.bot { text-align: left; color: #00704a; }
.user { text-align: right; color: #444; }
button {
  margin-top: 15px;
  padding: 15px 25px;
  background: #00704a;
  color: white;
  border: none;
  border-radius: 30px;
  font-size: 16px;
}
button:active { background: #005c3a; }
</style>
</head>
<body>
<h2>ü§ñ Nh√¢n vi√™n ph·ª•c v·ª• ·∫£o</h2>
<div class="chat-box" id="chat"></div>
<button onclick="startListening()">üé§ N√≥i v·ªõi t√¥i</button>

<script>
const chat = document.getElementById("chat");
function addMsg(text, cls) {
  const div = document.createElement("div");
  div.className = "message " + cls;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function speak(text) {
  const utter = new SpeechSynthesisUtterance(text);
  utter.lang = "vi-VN";
  window.speechSynthesis.speak(utter);
}

// Logic tr·∫£ l·ªùi ƒë∆°n gi·∫£n (offline)
function getReply(text) {
  text = text.toLowerCase();
  if (text.includes("xin ch√†o") || text.includes("hello"))
    return "D·∫° em ch√†o anh/ch·ªã ·∫°! Anh/ch·ªã mu·ªën g·ªçi m√≥n g√¨ h√¥m nay ·∫°?";
  if (text.includes("c√† ph√™"))
    return "D·∫° c√≥ c√† ph√™ mu·ªëi, c√† ph√™ s·ªØa v√† c√† ph√™ ƒëen ·∫°. Anh/ch·ªã d√πng lo·∫°i n√†o?";
  if (text.includes("b·∫°c x·ªâu"))
    return "B·∫°c x·ªâu ƒë√° ngon l·∫Øm ·∫°, em ghi 1 ly cho anh/ch·ªã nh√©?";
  if (text.includes("tr√†"))
    return "D·∫°, b√™n em c√≥ tr√† ƒë√†o cam s·∫£, tr√† t·∫Øc v√† tr√† chanh ·∫°.";
  if (text.includes("c·∫£m ∆°n"))
    return "D·∫°, em c·∫£m ∆°n anh/ch·ªã ·∫°!";
  if (text.includes("t·∫°m bi·ªát"))
    return "D·∫°, ch√∫c anh/ch·ªã m·ªôt ng√†y vui v·∫ª!";
  return "D·∫°, anh/ch·ªã c√≥ th·ªÉ n√≥i l·∫°i gi√∫p em t√™n m√≥n ƒë∆∞·ª£c kh√¥ng ·∫°?";
}

function startListening() {
  const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
  recognition.lang = "vi-VN";
  recognition.start();

  recognition.onresult = (event) => {
    const text = event.results[0][0].transcript;
    addMsg(text, "user");
    const reply = getReply(text);
    setTimeout(() => {
      addMsg(reply, "bot");
      speak(reply);
    }, 500);
  };

  recognition.onerror = () => {
    speak("Em kh√¥ng nghe r√µ ·∫°, anh/ch·ªã n√≥i l·∫°i ƒë∆∞·ª£c kh√¥ng?");
  };
}

// Ch√†o khi m·ªü trang
window.onload = () => {
  const hello = "Xin ch√†o, em l√† nh√¢n vi√™n ph·ª•c v·ª• ·∫£o. Anh/ch·ªã mu·ªën g·ªçi m√≥n g√¨ ·∫°?";
  addMsg(hello, "bot");
  speak(hello);
};
</script>
</body>
</html>

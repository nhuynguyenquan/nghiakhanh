<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Mô hình 3D Bếp đun + Tủ sấy</title>
  <style>
    body { margin: 0; overflow: hidden; background: #f0e7d8; }
    #container { width: 100vw; height: 100vh; }
  </style>
</head>
<body>
  <div id="container"></div>

  <script type="module">
    import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.module.js';
    import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/controls/OrbitControls.js';

    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0xf0e7d8);

    const camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.set(300, 200, 300);

    const renderer = new THREE.WebGLRenderer({antialias: true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.getElementById('container').appendChild(renderer.domElement);

    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;

    const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
    scene.add(ambientLight);

    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.7);
    directionalLight.position.set(100, 200, 100);
    scene.add(directionalLight);

    const metalMaterial = new THREE.MeshStandardMaterial({color: 0x8a6c31, metalness: 0.7, roughness: 0.4});
    const darkMetalMaterial = new THREE.MeshStandardMaterial({color: 0x3b220a, metalness: 0.6, roughness: 0.7});
    const clothMaterial = new THREE.MeshStandardMaterial({color: 0x4a3e16, roughness: 0.9, opacity: 0.9, transparent: true});

    const fireboxGeometry = new THREE.BoxGeometry(200, 60, 150);
    const firebox = new THREE.Mesh(fireboxGeometry, darkMetalMaterial);
    firebox.position.set(0, 30, 0);
    firebox.castShadow = true;
    firebox.receiveShadow = true;
    scene.add(firebox);

    const cabinetGeometry = new THREE.BoxGeometry(200, 100, 150);
    const cabinet = new THREE.Mesh(cabinetGeometry, metalMaterial);
    cabinet.position.set(0, 90 + 50, 0);
    cabinet.castShadow = true;
    cabinet.receiveShadow = true;
    scene.add(cabinet);

    const doorGeometry = new THREE.PlaneGeometry(180, 90);
    const door = new THREE.Mesh(doorGeometry, clothMaterial);
    door.position.set(0, 90 + 50, 76);
    door.rotation.y = 0;
    scene.add(door);

    const chimneyGeometry = new THREE.BoxGeometry(40, 130, 40);
    const chimneyMaterial = new THREE.MeshStandardMaterial({color: 0x444444, metalness: 0.7, roughness: 0.3});
    const chimney = new THREE.Mesh(chimneyGeometry, chimneyMaterial);
    chimney.position.set(0, 130 / 2, -75);
    scene.add(chimney);

    const legGeometry = new THREE.CylinderGeometry(8, 8, 70, 16);
    const legMaterial = new THREE.MeshStandardMaterial({color: 0x3d2f11, metalness: 0.6, roughness: 0.7});
    const wheelGeometry = new THREE.TorusGeometry(12, 4, 16, 100);
    const wheelMaterial = new THREE.MeshStandardMaterial({color: 0x222222, metalness: 0.7, roughness: 0.3});

    const legPositions = [
      [-90, 35, 60],
      [90, 35, 60],
      [-90, 35, -60],
      [90, 35, -60]
    ];

    legPositions.forEach(pos => {
      const leg = new THREE.Mesh(legGeometry, legMaterial);
      leg.position.set(pos[0], pos[1], pos[2]);
      scene.add(leg);

      const wheel = new THREE.Mesh(wheelGeometry, wheelMaterial);
      wheel.position.set(pos[0], 10, pos[2]);
      wheel.rotation.x = Math.PI / 2;
      scene.add(wheel);
    });

    const floorGeometry = new THREE.PlaneGeometry(1000, 1000);
    const floorMaterial = new THREE.MeshStandardMaterial({color: 0xddd4bb});
    const floor = new THREE.Mesh(floorGeometry, floorMaterial);
    floor.rotation.x = -Math.PI / 2;
    floor.position.y = 0;
    scene.add(floor);

    const flameLight = new THREE.PointLight(0xff6600, 1, 200);
    flameLight.position.set(0, 45, 20);
    scene.add(flameLight);

    function animate() {
      requestAnimationFrame(animate);
      controls.update();
      flameLight.intensity = 1 + 0.5 * Math.sin(Date.now() * 0.01);
      renderer.render(scene, camera);
    }
    animate();

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

  </script>
</body>
</html>

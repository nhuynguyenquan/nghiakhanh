<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    :root {
      --bg: #020617;
      --panel: rgba(255,255,255,0.08);
      --border: rgba(255,255,255,0.15);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #22c55e;
      --danger: #ef4444;
    }

    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: radial-gradient(circle at top, #1e293b, var(--bg));
      color: var(--text);
    }

    /* ===== HEADER ===== */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 24px;
      background: var(--panel);
      backdrop-filter: blur(14px);
      border-bottom: 1px solid var(--border);
    }

    header .title {
      font-size: 20px;
      font-weight: 700;
    }

    header .actions button {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text);
      padding: 8px 14px;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.2s;
    }

    header .actions button:hover {
      background: rgba(255,255,255,0.1);
    }

    header .actions .logout {
      border-color: var(--danger);
      color: var(--danger);
    }

    /* ===== MAIN ===== */
    main {
      padding: 24px;
      max-width: 1200px;
      margin: auto;
    }

    .welcome {
      margin-bottom: 24px;
    }

    .welcome h2 {
      margin: 0 0 6px;
    }

    .welcome p {
      margin: 0;
      color: var(--muted);
    }

    /* ===== MODULE GRID ===== */
    .modules {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 20px;
    }

    .module {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .module:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
    }

    .module .icon {
      font-size: 28px;
      margin-bottom: 12px;
    }

    .module .name {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .module .desc {
      font-size: 13px;
      color: var(--muted);
    }

    .module.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    footer {
      text-align: center;
      padding: 20px;
      font-size: 12px;
      color: var(--muted);
    }
  </style>
</head>

<body>

<header>
  <div class="title">â˜• Cafe Admin Dashboard</div>
  <div class="actions">
    <button onclick="refresh()">ğŸ”„ Refresh</button>
    <button class="logout" onclick="logout()">ğŸšª Logout</button>
  </div>
</header>

<main>

  <div class="welcome">
    <h2>Xin chÃ o ğŸ‘‹</h2>
    <p>Chá»n module Ä‘á»ƒ quáº£n lÃ½ há»‡ thá»‘ng</p>
  </div>

  <div class="modules">

    <div class="module" onclick="openModule('menu')">
      <div class="icon">ğŸ“‹</div>
      <div class="name">Quáº£n lÃ½ Menu</div>
      <div class="desc">ThÃªm / sá»­a / áº©n mÃ³n</div>
    </div>

    <div class="module" onclick="openModule('order')">
      <div class="icon">ğŸ§¾</div>
      <div class="name">ÄÆ¡n hÃ ng</div>
      <div class="desc">Theo dÃµi order theo bÃ n</div>
    </div>

    <div class="module" onclick="openModule('table')">
      <div class="icon">ğŸª‘</div>
      <div class="name">BÃ n</div>
      <div class="desc">QR â€“ tráº¡ng thÃ¡i bÃ n</div>
    </div>

    <div class="module" onclick="openModule('revenue')">
      <div class="icon">ğŸ’°</div>
      <div class="name">Doanh thu</div>
      <div class="desc">NgÃ y / thÃ¡ng</div>
    </div>

    <div class="module" onclick="openModule('staff')">
      <div class="icon">ğŸ‘¨â€ğŸ³</div>
      <div class="name">NhÃ¢n viÃªn</div>
      <div class="desc">PhÃ¢n quyá»n</div>
    </div>

    <div class="module disabled">
      <div class="icon">âš™ï¸</div>
      <div class="name">CÃ i Ä‘áº·t</div>
      <div class="desc">Sáº¯p cÃ³</div>
    </div>

  </div>
</main>

<footer>
  Â© Cafe Admin System
</footer>

<script type="module">
import { CONFIG } from './js/config.js';

const API = CONFIG.API_URL;

/* ğŸ” Kiá»ƒm tra Ä‘Äƒng nháº­p */
async function checkAuth() {
  const token = localStorage.getItem('access_token');
  if (!token) {
    location.href = 'login.html';
    return;
  }

  const res = await fetch(API, {
    method: 'POST',
    body: JSON.stringify({
      action: 'verify',
      accessToken: token
    })
  }).then(r => r.json());

  if (!res.ok) {
    logout();
  }
}
checkAuth();

/* ğŸšª Logout */
window.logout = function () {
  localStorage.clear();
  location.href = 'login.html';
};

/* ğŸ”„ Refresh */
window.refresh = function () {
  location.reload();
};

/* ğŸ§© Má»Ÿ module */
window.openModule = function (name) {
  alert('Má»Ÿ module: ' + name);
  // Sau nÃ y:
  // location.href = name + '.html'
};
</script>

</body>
</html>

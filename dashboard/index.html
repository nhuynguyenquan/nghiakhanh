<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quản lý quán bánh</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    nav { background-color: #333; display: flex; flex-wrap: wrap; }
    nav button {
      flex: 1;
      padding: 1rem;
      background: #444;
      color: white;
      border: none;
      cursor: pointer;
    }
    nav button.active { background: #2196F3; }
    .tab-content { display: none; padding: 1rem; }
    .tab-content.active { display: block; }
    h2 { margin-top: 0; }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    .warning { color: red; font-weight: bold; }
    input, select, button { margin: 5px 0; padding: 5px; }
  </style>
</head>
<body>
  <nav>
    <button onclick="showTab('nguyenlieu')" class="active">Nguyên liệu</button>
    <button onclick="showTab('congthuc')">Công thức</button>
    <button onclick="showTab('sanxuat')">Sản xuất</button>
    <button onclick="showTab('khobanh')">Kho bánh</button>
    <button onclick="showTab('banhang')">Bán hàng</button>
    <button onclick="showTab('baocao')">Báo cáo</button>
  </nav>

  <div id="nguyenlieu" class="tab-content active">
    <h2>Quản lý Nguyên liệu</h2>
    <table id="nguyenlieuTable">
      <thead>
        <tr><th>Tên</th><th>Số lượng</th><th>Đơn vị</th><th>Trạng thái</th></tr>
      </thead>
      <tbody></tbody>
    </table>
    <h3>Nhập / Xuất nguyên liệu</h3>
    <input type="text" id="tenNguyenLieu" placeholder="Tên nguyên liệu">
    <input type="number" id="soLuongNguyenLieu" placeholder="Số lượng">
    <select id="loaiGiaoDich">
      <option value="nhap">Nhập</option>
      <option value="xuat">Xuất</option>
    </select>
    <button onclick="capNhatNguyenLieu()">Lưu</button>
    <h3>Thêm nguyên liệu mới</h3>
    <input type="text" id="tenMoi" placeholder="Tên">
    <input type="text" id="donViMoi" placeholder="Đơn vị">
    <input type="number" id="soLuongMoi" placeholder="Số lượng ban đầu">
    <button onclick="themNguyenLieu()">Thêm</button>
  </div>

  <div id="congthuc" class="tab-content">
    <h2>Quản lý Công thức</h2>
    <table>
      <thead>
        <tr><th>Tên bánh</th><th>Nguyên liệu</th><th>Thao tác</th></tr>
      </thead>
      <tbody id="congThucTable">
        <tr><td>Bánh mì</td><td>Bột: 200g, Men: 5g, Muối: 2g</td><td><button>Sửa</button></td></tr>
        <tr><td>Bánh kem</td><td>Bột: 300g, Sữa: 100ml, Trứng: 2</td><td><button>Sửa</button></td></tr>
      </tbody>
    </table>
  </div>

  <div id="sanxuat" class="tab-content">
    <h2>Ghi nhận sản xuất</h2>
    <input type="text" placeholder="Tên bánh">
    <input type="number" placeholder="Số lượng">
    <button>Ghi nhận</button>
    <table>
      <thead>
        <tr><th>Ngày</th><th>Tên bánh</th><th>Số lượng</th></tr>
      </thead>
      <tbody>
        <tr><td>2025-06-08</td><td>Bánh mì</td><td>100</td></tr>
        <tr><td>2025-06-08</td><td>Bánh kem</td><td>20</td></tr>
      </tbody>
    </table>
  </div>

  <div id="khobanh" class="tab-content">
    <h2>Kho Bánh</h2>
    <table>
      <thead>
        <tr><th>Tên bánh</th><th>Số lượng tồn</th></tr>
      </thead>
      <tbody>
        <tr><td>Bánh mì</td><td>50</td></tr>
        <tr><td>Bánh kem</td><td>10</td></tr>
      </tbody>
    </table>
  </div>

  <div id="banhang" class="tab-content">
    <h2>Bán Hàng</h2>
    <input type="text" placeholder="Tên bánh">
    <input type="number" placeholder="Số lượng bán">
    <button>Ghi nhận bán</button>
    <table>
      <thead>
        <tr><th>Ngày</th><th>Tên bánh</th><th>Số lượng bán</th></tr>
      </thead>
      <tbody>
        <tr><td>2025-06-08</td><td>Bánh mì</td><td>20</td></tr>
        <tr><td>2025-06-08</td><td>Bánh kem</td><td>5</td></tr>
      </tbody>
    </table>
  </div>

  <div id="baocao" class="tab-content">
    <h2>Báo Cáo</h2>
    <p><strong>Tổng sản xuất hôm nay:</strong> Bánh mì: 100, Bánh kem: 20</p>
    <p><strong>Tổng bán hôm nay:</strong> Bánh mì: 20, Bánh kem: 5</p>
    <p><strong>Tồn kho hiện tại:</strong> Bánh mì: 50, Bánh kem: 10</p>
  </div>

  <script>
    let nguyenLieu = [
      { ten: "Bột mì", soLuong: 5, donVi: "kg" },
      { ten: "Trứng", soLuong: 20, donVi: "quả" },
      { ten: "Đường", soLuong: 3, donVi: "kg" }
    ];

    function showTab(tabId) {
      document.querySelectorAll(".tab-content").forEach(tab => tab.classList.remove("active"));
      document.querySelectorAll("nav button").forEach(btn => btn.classList.remove("active"));
      document.getElementById(tabId).classList.add("active");
      event.target.classList.add("active");
      if (tabId === "nguyenlieu") loadNguyenLieu();
    }

    function loadNguyenLieu() {
      const tbody = document.querySelector("#nguyenlieuTable tbody");
      tbody.innerHTML = "";
      nguyenLieu.forEach(nl => {
        const row = document.createElement("tr");
        const canhBao = nl.soLuong < 2 ? "<span class='warning'>Gần hết</span>" : "";
        row.innerHTML = `<td>${nl.ten}</td><td>${nl.soLuong}</td><td>${nl.donVi}</td><td>${canhBao}</td>`;
        tbody.appendChild(row);
      });
    }

    function themNguyenLieu() {
      const ten = document.getElementById("tenMoi").value;
      const donVi = document.getElementById("donViMoi").value;
      const soLuong = parseFloat(document.getElementById("soLuongMoi").value);
      if (ten && donVi && !isNaN(soLuong)) {
        nguyenLieu.push({ ten, donVi, soLuong });
        loadNguyenLieu();
      }
    }

    function capNhatNguyenLieu() {
      const ten = document.getElementById("tenNguyenLieu").value;
      const soLuong = parseFloat(document.getElementById("soLuongNguyenLieu").value);
      const loai = document.getElementById("loaiGiaoDich").value;
      const item = nguyenLieu.find(nl => nl.ten.toLowerCase() === ten.toLowerCase());
      if (item && !isNaN(soLuong)) {
        if (loai === "nhap") item.soLuong += soLuong;
        else if (loai === "xuat") item.soLuong = Math.max(0, item.soLuong - soLuong);
        loadNguyenLieu();
      }
    }

    window.onload = loadNguyenLieu;
  </script>
</body>
</html>
